# 模型设置页面 UI 设计说明

## 页面布局

根据提供的示例图片，页面采用上下布局结构：

```
┌─────────────────────────────────────────────────────────────┐
│                      模型设置页面                              │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  ┌───────────────────────────────────────────────────────┐  │
│  │           已配置模型列表 (上方区域)                      │  │
│  │                                                         │  │
│  │  ┌─────────────────────────────────────────────────┐  │  │
│  │  │ 配置名称 │ 提供商 │ 模型 │ Base URL │ 状态 │ 操作 │  │  │
│  │  ├─────────────────────────────────────────────────┤  │  │
│  │  │ GPT-4    │ OpenAI │ gpt-4│    -     │  ●   │ 编辑│  │  │
│  │  │ Claude   │Anthropic│claude│   -     │  ○   │ 删除│  │  │
│  │  └─────────────────────────────────────────────────┘  │  │
│  │                                                         │  │
│  │  [分页控件]                                             │  │
│  └───────────────────────────────────────────────────────┘  │
│                                                               │
│  ┌───────────────────────────────────────────────────────┐  │
│  │           模型配置表单 (下方区域)                        │  │
│  │                                                         │  │
│  │  配置名称: [_____________________]                      │  │
│  │                                                         │  │
│  │  模型提供商: [▼ 请选择模型提供商    ]                   │  │
│  │                                                         │  │
│  │  模型: [_____________________]                          │  │
│  │                                                         │  │
│  │  ┌─ 动态配置字段区域 ─────────────────────────────┐    │  │
│  │  │ (根据选择的提供商显示不同字段)                  │    │  │
│  │  │                                                 │    │  │
│  │  │ API Key: [********************]                │    │  │
│  │  │                                                 │    │  │
│  │  │ Base URL: [_____________________]              │    │  │
│  │  │                                                 │    │  │
│  │  │ (其他特定字段...)                               │    │  │
│  │  └─────────────────────────────────────────────────┘    │  │
│  │                                                         │  │
│  │  [创建配置] [重置]                                      │  │
│  └───────────────────────────────────────────────────────┘  │
│                                                               │
└─────────────────────────────────────────────────────────────┘
```

## 上方区域：已配置模型列表

### 表格列定义

| 列名 | 宽度 | 说明 |
|------|------|------|
| 配置名称 | 200px | 显示配置的名称 |
| 模型提供商 | 150px | 显示提供商，使用蓝色标签 |
| 模型 | 200px | 显示模型标识 |
| Base URL | 自适应 | 显示基础 URL，支持省略 |
| 状态 | 100px | 开关组件，控制启用/禁用 |
| 创建时间 | 180px | 显示创建时间 |
| 操作 | 150px | 编辑和删除按钮 |

### 交互功能

1. **状态切换**
   - 使用 Switch 开关组件
   - 绿色表示启用，灰色表示禁用
   - 点击即时更新状态

2. **编辑操作**
   - 点击"编辑"按钮
   - 打开编辑抽屉或弹窗
   - 预填充现有配置数据

3. **删除操作**
   - 点击"删除"按钮
   - 弹出确认对话框
   - 确认后执行删除

4. **分页**
   - 支持每页显示数量调整
   - 显示总记录数
   - 页码跳转

## 下方区域：模型配置表单

### 基础字段（所有提供商共有）

```
配置名称: [必填] 文本输入框
  占位符: "例如: GPT-4 生产环境"

模型提供商: [必填] 下拉选择框
  选项:
  - OpenAI
  - Anthropic
  - Google AI
  - 变脸
  - Azure OpenAI
  - 自定义 OpenAI

模型: [必填] 文本输入框
  占位符: "请输入模型标识"
  提示: "例如: gpt-4, claude-3-opus, gemini-pro"
```

### 动态配置字段

#### 1. OpenAI / Anthropic / Google AI

```
┌─────────────────────────────────────┐
│ API Key: [必填] 密码输入框           │
│   占位符: "请输入 API Key"           │
└─────────────────────────────────────┘
```

#### 2. 变脸 (Bianlian)

```
┌─────────────────────────────────────┐
│ API Key: [必填] 密码输入框           │
│   占位符: "请输入 API Key"           │
│                                      │
│ Base URL: [必填] 文本输入框          │
│   占位符: "例如: https://api.example.com" │
└─────────────────────────────────────┘
```

#### 3. Azure OpenAI

```
┌─────────────────────────────────────┐
│ API Key: [必填] 密码输入框           │
│   占位符: "请输入 API Key"           │
│                                      │
│ Base URL: [必填] 文本输入框          │
│   占位符: "例如: https://my-resource.openai.azure.com" │
│                                      │
│ Deployment Name: [必填] 文本输入框   │
│   占位符: "例如: gpt-35-turbo"       │
│                                      │
│ API Version: [必填] 文本输入框       │
│   占位符: "例如: 2024-02-15-preview" │
└─────────────────────────────────────┘
```

#### 4. 自定义 OpenAI

```
┌─────────────────────────────────────┐
│ API Key: [必填] 密码输入框           │
│   占位符: "请输入 API Key"           │
│                                      │
│ Base URL: [必填] 文本输入框          │
│   占位符: "例如: https://api.custom-openai.com" │
│                                      │
│ 自定义查询参数: [可选] 多行文本框     │
│   占位符: '例如: {"param1": "value1"}' │
│   提示: "请输入 JSON 格式的查询参数"  │
└─────────────────────────────────────┘
```

### 操作按钮

```
[创建配置] [重置]
  ↑          ↑
  主按钮    次要按钮
  蓝色      默认色
```

## 视觉设计规范

### 颜色方案

- **主色调**: Ant Design 蓝色 (#1890ff)
- **成功色**: 绿色 (#52c41a) - 启用状态
- **危险色**: 红色 (#ff4d4f) - 删除操作
- **标签色**: 蓝色 (#1890ff) - 提供商标签

### 间距规范

- 卡片间距: 24px (mb-6)
- 表单项间距: 16px (Ant Design 默认)
- 按钮间距: 8px (Space small)

### 字体规范

- 标题: 16px, 加粗
- 正文: 14px, 常规
- 提示文本: 12px, 灰色

## 响应式设计

### 表格滚动

- 最小宽度: 1200px
- 小屏幕下支持横向滚动
- 操作列固定在右侧

### 表单宽度

- 最大宽度: 672px (max-w-2xl)
- 居左对齐
- 标签垂直布局

## 交互反馈

### 加载状态

1. **列表加载**: 表格显示骨架屏
2. **状态切换**: Switch 显示加载动画
3. **删除操作**: 删除按钮显示加载动画
4. **表单提交**: 创建按钮显示加载动画

### 成功提示

- 创建成功: "模型配置创建成功"
- 更新成功: "状态更新成功"
- 删除成功: "模型配置删除成功"

### 错误提示

- 创建失败: "模型配置创建失败"
- 更新失败: "状态更新失败"
- 删除失败: "模型配置删除失败"
- 验证失败: "请输入有效的 JSON 格式"

## 参考示例图片说明

根据提供的示例图片，页面应该呈现以下特点：

1. **深色主题**（可选）
   - 背景色: 深灰色
   - 卡片背景: 稍浅的灰色
   - 文字: 白色/浅灰色

2. **模型列表展示**
   - 每个模型一行
   - 右侧有启用/禁用开关
   - 支持查看所有模型的链接

3. **折叠面板设计**
   - API Keys 区域可折叠
   - 每个提供商独立配置区域
   - 支持展开/收起

4. **配置表单特点**
   - 清晰的字段标签
   - 占位符提示
   - 密码字段使用密码输入框
   - 示例值提示

## 实现要点

1. **动态表单渲染**
   - 根据 `selectedProvider` 状态动态显示字段
   - 切换提供商时清空相关字段

2. **表单验证**
   - 必填字段验证
   - URL 格式验证
   - JSON 格式验证

3. **状态管理**
   - 使用 React Query 管理服务端状态
   - 自动缓存和更新
   - 乐观更新提升体验

4. **错误处理**
   - 统一的错误提示
   - 表单字段级别的错误显示
   - 网络错误处理
