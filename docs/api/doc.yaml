basePath: /api/v1
definitions:
  ChangePasswordRequest:
    properties:
      newPassword:
        example: newpassword123
        minLength: 8
        type: string
      oldPassword:
        example: oldpassword123
        type: string
    required:
    - newPassword
    - oldPassword
    type: object
  CreateTenantRequestSwagger:
    properties:
      domain:
        example: example.com
        maxLength: 255
        type: string
      metadata:
        type: object
      name:
        example: 示例租户
        maxLength: 255
        minLength: 1
        type: string
    required:
    - name
    type: object
  CreateUserRequest:
    properties:
      displayName:
        example: 张三
        type: string
      email:
        example: user@example.com
        type: string
      isAdmin:
        example: false
        type: boolean
      meta:
        type: object
      password:
        example: password123
        minLength: 8
        type: string
      phone:
        example: "13800138000"
        type: string
      roles:
        example:
        - '["user"]'
        items:
          type: string
        type: array
      tenantId:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
    required:
    - email
    - password
    type: object
  HealthStatusResponse:
    properties:
      code:
        example: 200
        type: integer
      data:
        $ref: '#/definitions/health.HealthStatus'
      message:
        example: success
        type: string
    type: object
  LoginRequest:
    properties:
      email:
        example: user@example.com
        type: string
      password:
        example: password123
        type: string
    required:
    - email
    - password
    type: object
  LogoutRequest:
    properties:
      refreshToken:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
    required:
    - refreshToken
    type: object
  RefreshRequest:
    properties:
      refreshToken:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
    required:
    - refreshToken
    type: object
  RegisterRequest:
    properties:
      displayName:
        example: 张三
        type: string
      email:
        example: user@example.com
        type: string
      password:
        example: password123
        minLength: 8
        type: string
      phone:
        example: "13800138000"
        type: string
      tenantId:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
    required:
    - email
    - password
    - tenantId
    type: object
  ResendVerificationRequest:
    properties:
      tenantId:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      userId:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
    required:
    - tenantId
    - userId
    type: object
  UnlockAccountRequest:
    properties:
      tenantId:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      userId:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
    required:
    - tenantId
    - userId
    type: object
  UpdateTenantRequestSwagger:
    properties:
      domain:
        example: updated.com
        maxLength: 255
        type: string
      metadata:
        type: object
      name:
        example: 更新后的租户名
        maxLength: 255
        minLength: 1
        type: string
      status:
        example: true
        type: boolean
    type: object
  UpdateTenantStatusRequest:
    properties:
      status:
        example: true
        type: boolean
    required:
    - status
    type: object
  UpdateUserRequest:
    properties:
      displayName:
        example: 李四
        type: string
      email:
        example: newemail@example.com
        type: string
      isActive:
        example: true
        type: boolean
      isAdmin:
        example: false
        type: boolean
      meta:
        type: object
      phone:
        example: "13900139000"
        type: string
      roles:
        example:
        - '["user"'
        - '"moderator"]'
        items:
          type: string
        type: array
    type: object
  UpdateUserStatusRequest:
    properties:
      isActive:
        example: true
        type: boolean
    required:
    - isActive
    type: object
  VerifyEmailRequest:
    properties:
      token:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
    required:
    - token
    type: object
  health.HealthStatus:
    properties:
      dependencies:
        additionalProperties:
          type: string
        description: 依赖服务状态
        example:
          database: connected
          genkit: connected
        type: object
      status:
        description: 整体状态：healthy, unhealthy
        example: healthy
        type: string
      uptime:
        description: 运行时间
        example: 2h30m15s
        type: string
      version:
        description: 服务版本
        example: 1.0.0
        type: string
    type: object
  AbortRequest:
    properties:
      messageId:
        description: 消息ID（必填）
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
    required:
    - messageId
    type: object
  AlertListDataResponse:
    type: object
  AnyDataResponse:
    type: object
  AuthAuditItem:
    properties:
      createdAt:
        description: 事件发生时间
        example: "2024-01-01T12:00:00Z"
        type: string
      event:
        description: 事件类型
        example: login
        type: string
      id:
        description: 审计日志ID
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      ip:
        description: 客户端IP地址
        example: 192.168.1.1
        type: string
      meta:
        description: 事件元数据
      tenantId:
        description: 租户ID
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      userAgent:
        description: 用户代理字符串
        example: Mozilla/5.0
        type: string
      userId:
        description: 用户ID
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
    type: object
  AuthAuditListResponse:
    properties:
      code:
        description: 响应代码
        example: 200
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/PaginationData-array_model_AuthAuditItem'
        description: 分页数据
      message:
        description: 响应信息
        example: success
        type: string
      traceId:
        description: 追踪ID（用于全链路追踪和问题排查）
        example: trace-1729756800-a1b2c3d4
        type: string
    type: object
  ChatOptions:
    properties:
      maxTokens:
        description: 最大token数
        example: 2048
        type: integer
      temperature:
        description: 温度值，控制输出的随机性（0-2）
        example: 0.7
        maximum: 2
        minimum: 0
        type: number
      topK:
        description: Top-K采样参数
        example: 40
        type: integer
      topP:
        description: Top-P采样参数（0-1）
        example: 0.9
        maximum: 1
        minimum: 0
        type: number
    type: object
  ChatRequest:
    properties:
      message:
        description: 用户消息内容
        example: 你好，请介绍一下你自己
        type: string
      messageId:
        description: 消息ID（可选，用于继续对话）
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      options:
        allOf:
        - $ref: '#/definitions/ChatOptions'
        description: AI高级参数（可选）
    required:
    - message
    type: object
  ChatResponse:
    properties:
      message:
        description: AI生成的消息内容
        example: 你好！我是一个 AI 助手...
        type: string
      model:
        description: 使用的模型名称
        example: gemini-1.5-flash
        type: string
      sessionId:
        description: 会话ID
        example: session-123456
        type: string
      usage:
        allOf:
        - $ref: '#/definitions/Usage'
        description: Token使用情况
    type: object
  ChatResponseData:
    properties:
      code:
        description: 响应代码
        example: 200
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/ChatResponse'
        description: 响应数据
      message:
        description: 响应信息
        example: success
        type: string
      traceId:
        description: 追踪ID（用于全链路追踪和问题排查）
        example: trace-1729756800-a1b2c3d4
        type: string
    type: object
  CreateModelConfigurationRequest:
    properties:
      apiKey:
        type: string
      baseUrl:
        type: string
      model:
        type: string
      modelProvider:
        enum:
        - openai
        - anthropic
        - googlegenai
        - azureopenai
        - bianlian
        - custom_openai
        type: string
      name:
        type: string
      queryParams:
        type: string
      tenantId:
        description: 仅system_admin需要
        type: string
    required:
    - apiKey
    - model
    - modelProvider
    - name
    type: object
  CreateSessionRequest:
    properties:
      meta:
        additionalProperties: true
        description: 元数据（可选）
        type: object
      modelName:
        description: 模型名称
        example: gpt-4
        maxLength: 128
        type: string
      systemPrompt:
        description: 系统提示词（可选）
        example: 你是一个有帮助的AI助手
        type: string
      temperature:
        description: 温度参数（可选，0-2）
        example: 0.7
        maximum: 2
        minimum: 0
        type: number
      title:
        description: 会话标题
        example: 我的第一个会话
        maxLength: 255
        type: string
      topP:
        description: TopP参数（可选，0-1）
        example: 0.9
        maximum: 1
        minimum: 0
        type: number
    required:
    - modelName
    - title
    type: object
  ErrorResponse:
    properties:
      code:
        description: 响应代码
        example: 400
        type: integer
      message:
        description: 响应信息
        example: 请求参数错误
        type: string
      traceId:
        description: 追踪ID（用于全链路追踪和问题排查）
        example: trace-1729756800-a1b2c3d4
        type: string
    type: object
  HealthDataResponse:
    type: object
  LoginDataResponse:
    properties:
      code:
        description: 响应代码
        example: 200
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/LoginResponse'
        description: 响应数据
      message:
        description: 响应信息
        example: success
        type: string
      traceId:
        description: 追踪ID（用于全链路追踪和问题排查）
        example: trace-1729756800-a1b2c3d4
        type: string
    type: object
  LoginResponse:
    properties:
      accessToken:
        description: 访问令牌
        example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        type: string
      expiresIn:
        description: 过期时间（秒）
        example: 3600
        type: integer
      refreshToken:
        description: 刷新令牌
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      tokenType:
        description: 令牌类型
        example: Bearer
        type: string
      user:
        allOf:
        - $ref: '#/definitions/User'
        description: 用户信息
    type: object
  Message:
    properties:
      content:
        description: 消息内容
        example: 你好
        type: string
      createdAt:
        description: 创建时间
        example: "2024-01-01T12:00:00Z"
        type: string
      id:
        description: 消息ID
        example: msg-123456
        type: string
      role:
        description: 角色
        example: user
        type: string
      sequence:
        description: 序列号
        example: 1
        type: integer
    type: object
  MessageDetailDataResponse:
    properties:
      code:
        description: 响应代码
        example: 200
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/MessageDetailResponse'
        description: 响应数据
      message:
        description: 响应信息
        example: success
        type: string
      traceId:
        description: 追踪ID（用于全链路追踪和问题排查）
        example: trace-1729756800-a1b2c3d4
        type: string
    type: object
  MessageDetailListResponse:
    properties:
      code:
        description: 响应代码
        example: 200
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/PaginationData-array_model_MessageDetailResponse'
        description: 分页数据
      message:
        description: 响应信息
        example: success
        type: string
      traceId:
        description: 追踪ID（用于全链路追踪和问题排查）
        example: trace-1729756800-a1b2c3d4
        type: string
    type: object
  MessageDetailResponse:
    properties:
      content:
        description: 消息内容
        example: 你好
        type: string
      createdAt:
        description: 创建时间
        example: "2024-01-01T12:00:00Z"
        type: string
      error:
        description: 错误信息
        example: ""
        type: string
      id:
        description: 消息ID
        example: msg-123456
        type: string
      meta:
        additionalProperties: true
        description: 元数据
        type: object
      role:
        description: 角色
        example: user
        type: string
      sequence:
        description: 序列号
        example: 1
        type: integer
      sessionId:
        description: 会话ID
        example: session-123456
        type: string
      tokens:
        description: Token数量
        example: 10
        type: integer
      toolCalls:
        additionalProperties: true
        description: 工具调用
        type: object
    type: object
  MessagePreview:
    properties:
      content:
        description: 消息内容
        example: 你好
        type: string
      createdAt:
        description: 创建时间
        example: "2024-01-01T12:00:00Z"
        type: string
      id:
        description: 消息ID
        example: msg-123456
        type: string
      role:
        description: 角色
        example: user
        type: string
    type: object
  MessageResponse:
    properties:
      aiMessage:
        allOf:
        - $ref: '#/definitions/Message'
        description: AI消息
      messageId:
        description: 消息ID
        example: msg-123456
        type: string
      model:
        description: 模型名称
        example: gpt-4
        type: string
      sessionId:
        description: 会话ID
        example: session-123456
        type: string
      usage:
        allOf:
        - $ref: '#/definitions/Usage'
        description: 使用统计
      userMessage:
        allOf:
        - $ref: '#/definitions/Message'
        description: 用户消息
    type: object
  MessageResponseData:
    properties:
      code:
        description: 响应代码
        example: 200
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/MessageResponse'
        description: 响应数据
      message:
        description: 响应信息
        example: success
        type: string
      traceId:
        description: 追踪ID（用于全链路追踪和问题排查）
        example: trace-1729756800-a1b2c3d4
        type: string
    type: object
  MetricsDataResponse:
    type: object
  ModelConfiguration:
    properties:
      baseUrl:
        description: API基础URL（可选，用于自定义端点）
        type: string
      createdAt:
        type: string
      createdBy:
        description: 创建信息
        type: string
      id:
        description: 主键，UUID类型
        type: string
      isEnabled:
        description: 是否启用
        type: boolean
      model:
        description: 模型标识（如：gpt-4、claude-3-opus等）
        type: string
      modelProvider:
        description: 模型提供商枚举
        type: string
      name:
        description: 配置名称
        type: string
      queryParams:
        description: 查询参数（JSON格式，可选）
        type: string
      tenantId:
        description: 租户ID，外键关联
        type: string
      updatedAt:
        type: string
      updatedBy:
        description: 更新信息
        type: string
    type: object
  PaginationData-array_model_AuthAuditItem:
    properties:
      data:
        description: 数据
        items:
          $ref: '#/definitions/AuthAuditItem'
        type: array
      pageNo:
        description: 当前页码
        example: 1
        type: integer
      pageSize:
        description: 每页大小
        example: 10
        type: integer
      totalCount:
        description: 总记录数
        example: 100
        type: integer
      totalPage:
        description: 总页数
        example: 10
        type: integer
    type: object
  PaginationData-array_model_MessageDetailResponse:
    properties:
      data:
        description: 数据
        items:
          $ref: '#/definitions/MessageDetailResponse'
        type: array
      pageNo:
        description: 当前页码
        example: 1
        type: integer
      pageSize:
        description: 每页大小
        example: 10
        type: integer
      totalCount:
        description: 总记录数
        example: 100
        type: integer
      totalPage:
        description: 总页数
        example: 10
        type: integer
    type: object
  PaginationData-array_model_ModelConfiguration:
    properties:
      data:
        description: 数据
        items:
          $ref: '#/definitions/ModelConfiguration'
        type: array
      pageNo:
        description: 当前页码
        example: 1
        type: integer
      pageSize:
        description: 每页大小
        example: 10
        type: integer
      totalCount:
        description: 总记录数
        example: 100
        type: integer
      totalPage:
        description: 总页数
        example: 10
        type: integer
    type: object
  PaginationData-array_model_SessionResponse:
    properties:
      data:
        description: 数据
        items:
          $ref: '#/definitions/SessionResponse'
        type: array
      pageNo:
        description: 当前页码
        example: 1
        type: integer
      pageSize:
        description: 每页大小
        example: 10
        type: integer
      totalCount:
        description: 总记录数
        example: 100
        type: integer
      totalPage:
        description: 总页数
        example: 10
        type: integer
    type: object
  PaginationData-array_model_Tenant:
    properties:
      data:
        description: 数据
        items:
          $ref: '#/definitions/Tenant'
        type: array
      pageNo:
        description: 当前页码
        example: 1
        type: integer
      pageSize:
        description: 每页大小
        example: 10
        type: integer
      totalCount:
        description: 总记录数
        example: 100
        type: integer
      totalPage:
        description: 总页数
        example: 10
        type: integer
    type: object
  PaginationData-array_model_User:
    properties:
      data:
        description: 数据
        items:
          $ref: '#/definitions/User'
        type: array
      pageNo:
        description: 当前页码
        example: 1
        type: integer
      pageSize:
        description: 每页大小
        example: 10
        type: integer
      totalCount:
        description: 总记录数
        example: 100
        type: integer
      totalPage:
        description: 总页数
        example: 10
        type: integer
    type: object
  ResponseData-any:
    properties:
      code:
        description: 响应代码
        example: 200
        type: integer
      data:
        description: 响应数据
      message:
        description: 响应信息
        example: success
        type: string
      traceId:
        description: 追踪ID（用于全链路追踪和问题排查）
        example: trace-1729756800-a1b2c3d4
        type: string
    type: object
  ResponseData-array_model_ModelConfiguration:
    properties:
      code:
        description: 响应代码
        example: 200
        type: integer
      data:
        description: 响应数据
        items:
          $ref: '#/definitions/ModelConfiguration'
        type: array
      message:
        description: 响应信息
        example: success
        type: string
      traceId:
        description: 追踪ID（用于全链路追踪和问题排查）
        example: trace-1729756800-a1b2c3d4
        type: string
    type: object
  ResponseData-model_ModelConfiguration:
    properties:
      code:
        description: 响应代码
        example: 200
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/ModelConfiguration'
        description: 响应数据
      message:
        description: 响应信息
        example: success
        type: string
      traceId:
        description: 追踪ID（用于全链路追踪和问题排查）
        example: trace-1729756800-a1b2c3d4
        type: string
    type: object
  ResponseData-model_ValidationResult:
    properties:
      code:
        description: 响应代码
        example: 200
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/ValidationResult'
        description: 响应数据
      message:
        description: 响应信息
        example: success
        type: string
      traceId:
        description: 追踪ID（用于全链路追踪和问题排查）
        example: trace-1729756800-a1b2c3d4
        type: string
    type: object
  ResponsePaginationData-array_model_ModelConfiguration:
    properties:
      code:
        description: 响应代码
        example: 200
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/PaginationData-array_model_ModelConfiguration'
        description: 分页数据
      message:
        description: 响应信息
        example: success
        type: string
      traceId:
        description: 追踪ID（用于全链路追踪和问题排查）
        example: trace-1729756800-a1b2c3d4
        type: string
    type: object
  SendMessageRequest:
    properties:
      message:
        description: 消息内容
        example: 你好，请介绍一下你自己
        type: string
      options:
        allOf:
        - $ref: '#/definitions/ChatOptions'
        description: AI高级参数（可选）
      sessionId:
        description: 会话ID
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
    required:
    - message
    - sessionId
    type: object
  SessionDataResponse:
    properties:
      code:
        description: 响应代码
        example: 200
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/SessionResponse'
        description: 响应数据
      message:
        description: 响应信息
        example: success
        type: string
      traceId:
        description: 追踪ID（用于全链路追踪和问题排查）
        example: trace-1729756800-a1b2c3d4
        type: string
    type: object
  SessionListResponse:
    properties:
      code:
        description: 响应代码
        example: 200
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/PaginationData-array_model_SessionResponse'
        description: 分页数据
      message:
        description: 响应信息
        example: success
        type: string
      traceId:
        description: 追踪ID（用于全链路追踪和问题排查）
        example: trace-1729756800-a1b2c3d4
        type: string
    type: object
  SessionResponse:
    properties:
      createdAt:
        description: 创建时间
        example: "2024-01-01T12:00:00Z"
        type: string
      id:
        description: 会话ID
        example: session-123456
        type: string
      isArchived:
        description: 是否归档
        example: false
        type: boolean
      isPinned:
        description: 是否置顶
        example: false
        type: boolean
      lastMessage:
        allOf:
        - $ref: '#/definitions/MessagePreview'
        description: 最后一条消息
      messageCount:
        description: 消息数量
        example: 10
        type: integer
      meta:
        additionalProperties: true
        description: 元数据
        type: object
      modelName:
        description: 模型名称
        example: gpt-4
        type: string
      systemPrompt:
        description: 系统提示词
        example: 你是一个有帮助的AI助手
        type: string
      temperature:
        description: 温度参数
        example: 0.7
        type: number
      title:
        description: 会话标题
        example: 我的第一个会话
        type: string
      topP:
        description: TopP参数
        example: 0.9
        type: number
      updatedAt:
        description: 更新时间
        example: "2024-01-01T12:00:00Z"
        type: string
      userId:
        description: 用户ID
        example: user-123456
        type: string
    type: object
  SuccessResponse:
    properties:
      code:
        description: 响应代码
        example: 200
        type: integer
      message:
        description: 响应信息
        example: 操作成功
        type: string
      traceId:
        description: 追踪ID（用于全链路追踪和问题排查）
        example: trace-1729756800-a1b2c3d4
        type: string
    type: object
  Tenant:
    description: 租户信息，包含租户的基本信息和状态
    properties:
      createdAt:
        description: 创建时间
        example: "2025-01-20T10:00:00Z"
        type: string
      createdBy:
        description: 创建者用户ID
        example: 660e8400-e29b-41d4-a716-446655440000
        type: string
      createdByName:
        description: 创建者显示名称
        example: 张三
        type: string
      domain:
        description: 租户域名，用于子域识别
        example: acme.example.com
        type: string
      id:
        description: 租户ID
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      isDeleted:
        description: 软删除标记
        example: false
        type: boolean
      metadata:
        description: 租户元数据，存储租户的自定义信息
        type: object
      name:
        description: 租户名称
        example: Acme Corporation
        type: string
      status:
        description: |-
          租户状态：true=启用，false=禁用
          禁用的租户下的所有用户将无法登录
        example: true
        type: boolean
      type:
        description: |-
          租户类型：system=平台租户，tenant=业务租户
          可选值：system（平台租户，系统级租户，只能有一个）, tenant（业务租户，普通租户）
        enum:
        - system
        - tenant
        example: tenant
        type: string
      updatedAt:
        description: 更新时间
        example: "2025-01-20T10:00:00Z"
        type: string
    type: object
  TenantDataResponse:
    properties:
      code:
        description: 响应代码
        example: 200
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/Tenant'
        description: 响应数据
      message:
        description: 响应信息
        example: success
        type: string
      traceId:
        description: 追踪ID（用于全链路追踪和问题排查）
        example: trace-1729756800-a1b2c3d4
        type: string
    type: object
  TenantListResponse:
    properties:
      code:
        description: 响应代码
        example: 200
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/PaginationData-array_model_Tenant'
        description: 分页数据
      message:
        description: 响应信息
        example: success
        type: string
      traceId:
        description: 追踪ID（用于全链路追踪和问题排查）
        example: trace-1729756800-a1b2c3d4
        type: string
    type: object
  UpdateModelConfigurationRequest:
    properties:
      apiKey:
        type: string
      baseUrl:
        type: string
      model:
        type: string
      name:
        type: string
      queryParams:
        type: string
    type: object
  UpdateSessionRequest:
    properties:
      modelName:
        description: 模型名称（可选）
        example: gpt-4-turbo
        maxLength: 128
        type: string
      systemPrompt:
        description: 系统提示词（可选）
        example: 你是一个专业的编程助手
        type: string
      temperature:
        description: 温度参数（可选，0-2）
        example: 0.8
        maximum: 2
        minimum: 0
        type: number
      title:
        description: 会话标题（可选）
        example: 更新后的标题
        maxLength: 255
        type: string
      topP:
        description: TopP参数（可选，0-1）
        example: 0.95
        maximum: 1
        minimum: 0
        type: number
    type: object
  UpdateStatusRequest:
    properties:
      status:
        enum:
        - enabled
        - disabled
        type: string
    required:
    - status
    type: object
  Usage:
    properties:
      completionTokens:
        description: 生成内容token数
        example: 50
        type: integer
      promptTokens:
        description: 提示词token数
        example: 10
        type: integer
      totalTokens:
        description: 总token数
        example: 60
        type: integer
    type: object
  User:
    description: 用户信息，包含用户的基本信息、角色和状态
    properties:
      createdAt:
        description: 创建时间
        example: "2025-01-20T10:00:00Z"
        type: string
      createdBy:
        description: 创建者用户ID
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      createdByName:
        description: 创建者显示名称
        example: 张三
        type: string
      displayName:
        description: 显示名称
        example: 张三
        type: string
      email:
        description: 用户邮箱，全局唯一
        example: user@example.com
        type: string
      emailVerified:
        description: 邮箱是否已验证
        example: false
        type: boolean
      failedLoginAttempts:
        description: 登录失败次数，用于账户锁定策略
        example: 0
        type: integer
      id:
        description: 用户ID
        example: 660e8400-e29b-41d4-a716-446655440001
        type: string
      isActive:
        description: 账户是否激活，禁用的用户无法登录
        example: true
        type: boolean
      isAdmin:
        description: 是否为管理员（租户管理员或平台管理员）
        example: false
        type: boolean
      isDeleted:
        description: 软删除标记
        example: false
        type: boolean
      lastLoginAt:
        description: 最后登录时间
        example: "2025-01-20T10:00:00Z"
        type: string
      lockedUntil:
        description: 账户锁定时间，锁定期间无法登录
        example: "2025-01-20T10:00:00Z"
        type: string
      meta:
        description: 用户元数据，存储用户的自定义信息
        type: object
      phone:
        description: 手机号码
        example: "13800138000"
        type: string
      roles:
        description: |-
          用户角色列表，支持多角色
          可选值：system_admin（平台管理员）, tenant_admin（租户管理员）, user（普通用户）
          示例：["user"], ["tenant_admin"], ["system_admin"]
        example:
        - '["user"]'
        items:
          type: string
        type: array
      tenantId:
        description: 所属租户ID
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      updatedAt:
        description: 更新时间
        example: "2025-01-20T10:00:00Z"
        type: string
    type: object
  UserDataResponse:
    properties:
      code:
        description: 响应代码
        example: 200
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/User'
        description: 响应数据
      message:
        description: 响应信息
        example: success
        type: string
      traceId:
        description: 追踪ID（用于全链路追踪和问题排查）
        example: trace-1729756800-a1b2c3d4
        type: string
    type: object
  UserListResponse:
    properties:
      code:
        description: 响应代码
        example: 200
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/PaginationData-array_model_User'
        description: 分页数据
      message:
        description: 响应信息
        example: success
        type: string
      traceId:
        description: 追踪ID（用于全链路追踪和问题排查）
        example: trace-1729756800-a1b2c3d4
        type: string
    type: object
  ValidationResult:
    properties:
      details:
        type: string
      message:
        type: string
      valid:
        type: boolean
    type: object
host: localhost:8080
info:
  contact:
    email: support@example.com
    name: API Support
  description: |-
    AI 模型提供商管理服务 API 文档
    提供模型提供商、模型信息和参数规则的查询接口
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  title: Genkit AI Service API
  version: 1.0.0
paths:
  /audit/auth:
    get:
      consumes:
      - application/json
      description: 查询认证审计日志，支持多条件过滤和分页
      parameters:
      - description: 租户ID
        in: query
        name: tenantId
        type: string
      - description: 用户ID
        in: query
        name: userId
        type: string
      - description: 事件类型（login, logout, refresh, revoke, failed_login）
        in: query
        name: event
        type: string
      - description: 开始时间（RFC3339格式）
        in: query
        name: startTime
        type: string
      - description: 结束时间（RFC3339格式）
        in: query
        name: endTime
        type: string
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 10
        description: 每页大小
        in: query
        name: pageSize
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 查询成功
          schema:
            $ref: '#/definitions/AuthAuditListResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: 查询审计日志
      tags:
      - Audit
  /auth/change-password:
    post:
      consumes:
      - application/json
      description: 修改当前用户的密码
      parameters:
      - description: 修改密码请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/ChangePasswordRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 修改成功
          schema:
            $ref: '#/definitions/SuccessResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: 未认证或旧密码错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "422":
          description: 参数验证失败
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: 修改密码
      tags:
      - Authentication
  /auth/login:
    post:
      consumes:
      - application/json
      description: 使用邮箱和密码登录系统
      parameters:
      - description: 登录请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 登录成功
          schema:
            $ref: '#/definitions/LoginDataResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: 认证失败
          schema:
            $ref: '#/definitions/ErrorResponse'
        "422":
          description: 参数验证失败
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: 用户登录
      tags:
      - Authentication
  /auth/logout:
    post:
      consumes:
      - application/json
      description: 注销用户并撤销 Refresh Token
      parameters:
      - description: 注销请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/LogoutRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 注销成功
          schema:
            $ref: '#/definitions/SuccessResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: Token 无效
          schema:
            $ref: '#/definitions/ErrorResponse'
        "422":
          description: 参数验证失败
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: 用户注销
      tags:
      - Authentication
  /auth/me:
    get:
      consumes:
      - application/json
      description: 获取当前登录用户的详细信息
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/UserDataResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: 用户不存在
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取当前用户信息
      tags:
      - Authentication
  /auth/refresh:
    post:
      consumes:
      - application/json
      description: 使用 Refresh Token 获取新的 Access Token
      parameters:
      - description: 刷新请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/RefreshRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 刷新成功
          schema:
            $ref: '#/definitions/LoginDataResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: Token 无效或已过期
          schema:
            $ref: '#/definitions/ErrorResponse'
        "422":
          description: 参数验证失败
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: 刷新访问令牌
      tags:
      - Authentication
  /auth/register:
    post:
      consumes:
      - application/json
      description: 注册新用户账户
      parameters:
      - description: 注册请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/RegisterRequest'
      produces:
      - application/json
      responses:
        "201":
          description: 注册成功
          schema:
            $ref: '#/definitions/UserDataResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "422":
          description: 参数验证失败
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: 用户注册
      tags:
      - Authentication
  /auth/resend-verification:
    post:
      consumes:
      - application/json
      description: 重新发送邮箱验证邮件
      parameters:
      - description: 重发请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/ResendVerificationRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 发送成功
          schema:
            $ref: '#/definitions/SuccessResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "422":
          description: 参数验证失败
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: 重新发送验证邮件
      tags:
      - Authentication
  /auth/unlock-account:
    post:
      consumes:
      - application/json
      description: 解锁被锁定的用户账户（需要管理员权限）
      parameters:
      - description: 解锁请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/UnlockAccountRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 解锁成功
          schema:
            $ref: '#/definitions/SuccessResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/ErrorResponse'
        "422":
          description: 参数验证失败
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: 解锁账户
      tags:
      - Authentication
  /auth/verify-email:
    post:
      consumes:
      - application/json
      description: 使用验证令牌验证用户邮箱
      parameters:
      - description: 验证请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/VerifyEmailRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 验证成功
          schema:
            $ref: '#/definitions/SuccessResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "422":
          description: 参数验证失败
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: 验证邮箱
      tags:
      - Authentication
  /chat:
    post:
      consumes:
      - application/json
      description: 向 AI 发送消息并获取回复，支持通过 messageId 继续对话
      parameters:
      - description: 对话请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/ChatRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回 AI 回复
          schema:
            $ref: '#/definitions/ChatResponseData'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "422":
          description: 参数验证失败
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "503":
          description: AI 服务不可用
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: 发送对话消息
      tags:
      - chat
  /chat/abort:
    post:
      consumes:
      - application/json
      description: 中止指定消息的对话处理
      parameters:
      - description: 中止请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/AbortRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 成功中止对话
          schema:
            $ref: '#/definitions/SuccessResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: 消息不存在
          schema:
            $ref: '#/definitions/ErrorResponse'
        "422":
          description: 参数验证失败
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: 中止对话
      tags:
      - chat
  /chat/messages/{id}:
    get:
      consumes:
      - application/json
      description: 根据消息ID获取消息的详细信息
      parameters:
      - description: 消息ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回消息详情
          schema:
            $ref: '#/definitions/MessageDetailDataResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: 无权访问
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: 消息不存在
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: 获取消息详情
      tags:
      - messages
  /chat/messages/{id}/abort:
    post:
      consumes:
      - application/json
      description: 中止指定消息的AI生成过程
      parameters:
      - description: 消息ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功中止消息生成
          schema:
            $ref: '#/definitions/AnyDataResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: 无权访问
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: 消息不存在
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: 中止消息生成
      tags:
      - messages
  /chat/sessions:
    get:
      consumes:
      - application/json
      description: 获取用户的会话列表，支持分页和过滤
      parameters:
      - default: 1
        description: 页码
        in: query
        minimum: 1
        name: pageNo
        required: true
        type: integer
      - default: 20
        description: 每页大小
        in: query
        maximum: 100
        minimum: 1
        name: pageSize
        required: true
        type: integer
      - description: 是否置顶
        in: query
        name: isPinned
        type: boolean
      - description: 是否归档
        in: query
        name: isArchived
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回会话列表
          schema:
            $ref: '#/definitions/SessionListResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "422":
          description: 参数验证失败
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: 获取会话列表
      tags:
      - sessions
    post:
      consumes:
      - application/json
      description: 创建一个新的聊天会话
      parameters:
      - description: 创建会话请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/CreateSessionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 成功创建会话
          schema:
            $ref: '#/definitions/SessionDataResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "422":
          description: 参数验证失败
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: 创建新会话
      tags:
      - sessions
  /chat/sessions/{id}:
    delete:
      consumes:
      - application/json
      description: 软删除指定的会话
      parameters:
      - description: 会话ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功删除会话
          schema:
            $ref: '#/definitions/AnyDataResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: 无权访问
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: 会话不存在
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: 删除会话
      tags:
      - sessions
    get:
      consumes:
      - application/json
      description: 根据会话ID获取会话的详细信息
      parameters:
      - description: 会话ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回会话详情
          schema:
            $ref: '#/definitions/SessionDataResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: 无权访问
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: 会话不存在
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: 获取会话详情
      tags:
      - sessions
    patch:
      consumes:
      - application/json
      description: 更新会话的标题、配置等信息
      parameters:
      - description: 会话ID
        in: path
        name: id
        required: true
        type: string
      - description: 更新会话请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/UpdateSessionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 成功更新会话
          schema:
            $ref: '#/definitions/SessionDataResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: 无权访问
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: 会话不存在
          schema:
            $ref: '#/definitions/ErrorResponse'
        "422":
          description: 参数验证失败
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: 更新会话
      tags:
      - sessions
  /chat/sessions/{id}/archive:
    post:
      consumes:
      - application/json
      description: 归档或取消归档指定的会话
      parameters:
      - description: 会话ID
        in: path
        name: id
        required: true
        type: string
      - description: 是否归档
        in: query
        name: archived
        required: true
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: 成功更新归档状态
          schema:
            $ref: '#/definitions/AnyDataResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: 无权访问
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: 会话不存在
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: 归档会话
      tags:
      - sessions
  /chat/sessions/{id}/messages:
    get:
      consumes:
      - application/json
      description: 获取指定会话的消息历史，支持分页
      parameters:
      - description: 会话ID
        in: path
        name: id
        required: true
        type: string
      - default: 1
        description: 页码
        in: query
        minimum: 1
        name: pageNo
        required: true
        type: integer
      - default: 50
        description: 每页大小
        in: query
        maximum: 100
        minimum: 1
        name: pageSize
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回消息历史
          schema:
            $ref: '#/definitions/MessageDetailListResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: 无权访问
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: 会话不存在
          schema:
            $ref: '#/definitions/ErrorResponse'
        "422":
          description: 参数验证失败
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: 获取消息历史
      tags:
      - messages
    post:
      consumes:
      - application/json
      description: 在指定会话中发送消息并获取AI回复
      parameters:
      - description: 会话ID
        in: path
        name: id
        required: true
        type: string
      - description: 发送消息请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/SendMessageRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 成功发送消息
          schema:
            $ref: '#/definitions/MessageResponseData'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: 无权访问
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: 会话不存在
          schema:
            $ref: '#/definitions/ErrorResponse'
        "422":
          description: 参数验证失败
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: 发送消息
      tags:
      - messages
  /chat/sessions/{id}/messages/stream:
    post:
      consumes:
      - application/json
      description: 在指定会话中发送消息并以 SSE 流式返回 AI 回复
      parameters:
      - description: 会话ID
        in: path
        name: id
        required: true
        type: string
      - description: 发送消息请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/SendMessageRequest'
      produces:
      - text/event-stream
      responses:
        "200":
          description: SSE 流式响应
          schema:
            type: string
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: 无权访问
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: 会话不存在
          schema:
            $ref: '#/definitions/ErrorResponse'
        "422":
          description: 参数验证失败
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: 流式发送消息
      tags:
      - messages
  /chat/sessions/{id}/pin:
    post:
      consumes:
      - application/json
      description: 置顶或取消置顶指定的会话
      parameters:
      - description: 会话ID
        in: path
        name: id
        required: true
        type: string
      - description: 是否置顶
        in: query
        name: pinned
        required: true
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: 成功更新置顶状态
          schema:
            $ref: '#/definitions/AnyDataResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: 无权访问
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: 会话不存在
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: 置顶会话
      tags:
      - sessions
  /chat/sessions/search:
    get:
      consumes:
      - application/json
      description: 根据关键词搜索会话
      parameters:
      - description: 搜索关键词
        in: query
        name: keyword
        required: true
        type: string
      - default: 1
        description: 页码
        in: query
        minimum: 1
        name: pageNo
        required: true
        type: integer
      - default: 20
        description: 每页大小
        in: query
        maximum: 100
        minimum: 1
        name: pageSize
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回搜索结果
          schema:
            $ref: '#/definitions/SessionListResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "422":
          description: 参数验证失败
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: 搜索会话
      tags:
      - sessions
  /chat/stream:
    post:
      consumes:
      - application/json
      description: 向 AI 发送消息并以流式方式获取回复，支持通过 messageId 继续对话
      parameters:
      - description: 对话请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/ChatRequest'
      produces:
      - text/event-stream
      responses:
        "200":
          description: 流式返回 AI 回复（Server-Sent Events 格式）
          schema:
            type: string
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "422":
          description: 参数验证失败
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "503":
          description: AI 服务不可用
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: 发送流式对话消息
      tags:
      - chat
  /health:
    get:
      consumes:
      - application/json
      description: 检查服务及其依赖项的健康状态
      produces:
      - application/json
      responses:
        "200":
          description: 服务健康
          schema:
            $ref: '#/definitions/HealthStatusResponse'
        "500":
          description: 健康检查失败
          schema:
            $ref: '#/definitions/ErrorResponse'
        "503":
          description: 服务不健康
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: 健康检查
      tags:
      - health
  /model-configurations:
    get:
      consumes:
      - application/json
      description: |-
        获取模型配置列表，支持分页和租户过滤

        **权限要求**：
        - 平台管理员（system_admin）：可以查看所有租户的配置或指定租户的配置
        - 租户管理员（tenant_admin）：只能查看自己租户下的配置

        **tenantId 查询参数使用规则**：
        - 租户管理员：
        - tenantId 参数会被忽略
        - 始终只返回当前用户所属租户下的配置列表
        - 平台管理员：
        - 如果提供 tenantId，返回指定租户下的配置列表
        - 如果不提供 tenantId，返回所有租户下的配置列表

        **参数说明**：
        - pageNo: 页码（从1开始，默认1）
        - pageSize: 每页大小（1-100，默认20）
        - tenantId: 租户ID（可选，UUID格式，仅平台管理员可用）

        **注意事项**：
        - 租户管理员调用此接口时，tenantId 参数会被忽略
        - 租户管理员始终只能看到自己租户下的配置
      parameters:
      - default: 1
        description: 页码
        in: query
        minimum: 1
        name: pageNo
        type: integer
      - default: 20
        description: 每页大小
        in: query
        maximum: 100
        minimum: 1
        name: pageSize
        type: integer
      - description: 租户ID（仅平台管理员可用）
        in: query
        name: tenantId
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/ResponsePaginationData-array_model_ModelConfiguration'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/ErrorResponse'
        "422":
          description: 参数验证失败
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取模型配置列表
      tags:
      - Model Configuration
    post:
      consumes:
      - application/json
      description: |-
        创建新的模型配置，支持可选的租户ID参数

        **权限要求**：
        - 平台管理员（system_admin）：可以在任意租户下创建模型配置
        - 租户管理员（tenant_admin）：只能在自己的租户下创建模型配置

        **tenantId 参数使用规则**：
        - 租户管理员：
        - 如果不提供 tenantId，系统自动使用当前用户的租户ID
        - 如果提供 tenantId，必须与当前用户的租户ID匹配，否则返回 403 错误
        - 平台管理员：
        - 必须提供 tenantId 参数
        - 可以指定任意有效的租户ID

        **参数说明**：
        - tenantId: 租户ID（可选，UUID格式）
        - name: 配置名称（必填）
        - model: 模型标识（必填，如：gpt-4、claude-3-opus）
        - modelProvider: 模型提供商（必填，可选值：openai、anthropic、googlegenai、azureopenai、bianlian、custom_openai）
        - baseUrl: API基础URL（可选，用于自定义端点）
        - apiKey: API密钥（必填，将被加密存储）
        - queryParams: 查询参数（可选，JSON格式）
      parameters:
      - description: 创建模型配置请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/CreateModelConfigurationRequest'
      produces:
      - application/json
      responses:
        "201":
          description: 创建成功
          schema:
            $ref: '#/definitions/ResponseData-model_ModelConfiguration'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: 权限不足：租户管理员只能在当前租户下创建模型配置
          schema:
            $ref: '#/definitions/ErrorResponse'
        "422":
          description: 参数验证失败
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: 创建模型配置
      tags:
      - Model Configuration
  /model-configurations/{id}:
    delete:
      consumes:
      - application/json
      description: |-
        软删除指定的模型配置

        **权限要求**：
        - 平台管理员（system_admin）：可以删除任意租户下的模型配置
        - 租户管理员（tenant_admin）：只能删除自己租户下的模型配置

        **访问权限验证**：
        - 系统会自动查询目标配置所属的租户
        - 租户管理员尝试删除其他租户的配置时，将收到 403 权限不足错误
        - 平台管理员可以删除任意租户的配置，无需额外验证

        **功能说明**：
        - 执行软删除操作（设置 is_deleted=true）
        - 删除后的配置数据仍保留在数据库中，但不再可见

        **参数说明**：
        - id: 配置ID（UUID格式）
      parameters:
      - description: 配置ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 删除成功
          schema:
            $ref: '#/definitions/ResponseData-any'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: 权限不足：无法删除其他租户的模型配置
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: 模型配置不存在
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: 删除模型配置
      tags:
      - Model Configuration
    get:
      consumes:
      - application/json
      description: |-
        根据配置ID获取模型配置详细信息

        **权限要求**：
        - 平台管理员（system_admin）：可以查看任意租户下的模型配置
        - 租户管理员（tenant_admin）：只能查看自己租户下的模型配置

        **访问权限验证**：
        - 系统会自动查询目标配置所属的租户
        - 租户管理员尝试查看其他租户的配置时，将收到 403 权限不足错误
        - 平台管理员可以查看任意租户的配置，无需额外验证

        **参数说明**：
        - id: 配置ID（UUID格式）
      parameters:
      - description: 配置ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/ResponseData-model_ModelConfiguration'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: 权限不足：无法访问其他租户的模型配置
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: 模型配置不存在
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取模型配置详情
      tags:
      - Model Configuration
    put:
      consumes:
      - application/json
      description: |-
        更新模型配置信息

        **权限要求**：
        - 平台管理员（system_admin）：可以更新任意租户下的模型配置
        - 租户管理员（tenant_admin）：只能更新自己租户下的模型配置

        **访问权限验证**：
        - 系统会自动查询目标配置所属的租户
        - 租户管理员尝试更新其他租户的配置时，将收到 403 权限不足错误
        - 平台管理员可以更新任意租户的配置，无需额外验证

        **参数说明**：
        - id: 配置ID（UUID格式）
        - name: 配置名称（可选）
        - model: 模型标识（可选）
        - baseUrl: API基础URL（可选）
        - apiKey: API密钥（可选，将被加密存储）
        - queryParams: 查询参数（可选，JSON格式）
      parameters:
      - description: 配置ID
        in: path
        name: id
        required: true
        type: string
      - description: 更新模型配置请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/UpdateModelConfigurationRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            $ref: '#/definitions/ResponseData-model_ModelConfiguration'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: 权限不足：无法更新其他租户的模型配置
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: 模型配置不存在
          schema:
            $ref: '#/definitions/ErrorResponse'
        "422":
          description: 参数验证失败
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新模型配置
      tags:
      - Model Configuration
  /model-configurations/{id}/status:
    patch:
      consumes:
      - application/json
      description: |-
        启用或禁用模型配置

        **权限要求**：
        - 平台管理员（system_admin）：可以更新任意租户下的模型配置状态
        - 租户管理员（tenant_admin）：只能更新自己租户下的模型配置状态

        **访问权限验证**：
        - 系统会自动查询目标配置所属的租户
        - 租户管理员尝试更新其他租户的配置状态时，将收到 403 权限不足错误
        - 平台管理员可以更新任意租户的配置状态，无需额外验证

        **功能说明**：
        - 启用配置（status=enabled）：配置可以被使用
        - 禁用配置（status=disabled）：配置将不可用

        **参数说明**：
        - id: 配置ID（UUID格式）
        - status: 配置状态（enabled=启用，disabled=禁用）
      parameters:
      - description: 配置ID
        in: path
        name: id
        required: true
        type: string
      - description: 更新配置状态请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/UpdateStatusRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            $ref: '#/definitions/ResponseData-any'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: 权限不足：无法更新其他租户的模型配置状态
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: 模型配置不存在
          schema:
            $ref: '#/definitions/ErrorResponse'
        "422":
          description: 参数验证失败
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新模型配置状态
      tags:
      - Model Configuration
  /model-configurations/{id}/validate:
    post:
      consumes:
      - application/json
      description: |-
        验证模型配置是否可以正确连接到提供商

        **权限要求**：
        - 平台管理员（system_admin）：可以验证任意租户下的模型配置
        - 租户管理员（tenant_admin）：只能验证自己租户下的模型配置

        **访问权限验证**：
        - 系统会自动查询目标配置所属的租户
        - 租户管理员尝试验证其他租户的配置时，将收到 403 权限不足错误
        - 平台管理员可以验证任意租户的配置，无需额外验证

        **功能说明**：
        - 使用配置的参数尝试连接到模型提供商
        - 验证请求设置30秒超时
        - 返回验证结果，包括成功/失败状态和详细信息

        **参数说明**：
        - id: 配置ID（UUID格式）
      parameters:
      - description: 配置ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 验证完成
          schema:
            $ref: '#/definitions/ResponseData-model_ValidationResult'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: 权限不足：无法验证其他租户的模型配置
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: 模型配置不存在
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: 验证模型配置
      tags:
      - Model Configuration
  /model-configurations/available:
    get:
      consumes:
      - application/json
      description: |-
        获取当前租户下所有可用的模型配置（已启用且未删除）

        **权限要求**：
        - 所有已认证用户都可以调用此接口
        - 自动返回当前用户所属租户下的可用配置

        **功能说明**：
        - 仅返回已启用（is_enabled=true）且未删除（is_deleted=false）的配置
        - 返回的配置不包含敏感信息（API密钥、查询参数等）
        - 用于前端展示可选的模型列表

        **返回字段**：
        - id: 配置ID
        - name: 配置名称
        - model: 模型标识
        - modelProvider: 模型提供商
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/ResponseData-array_model_ModelConfiguration'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取可用模型配置列表
      tags:
      - Model Configuration
  /monitoring/alerts:
    delete:
      description: 清空所有活跃告警
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/AnyDataResponse'
      summary: 清空告警
      tags:
      - Monitoring
    get:
      description: 获取当前活跃的告警列表
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/AlertListDataResponse'
      summary: 获取活跃告警
      tags:
      - Monitoring
  /monitoring/health:
    get:
      description: 获取系统健康状态和关键监控指标
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/HealthDataResponse'
      summary: 健康检查（含监控）
      tags:
      - Monitoring
  /monitoring/metrics:
    get:
      description: 获取认证系统的性能监控指标
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/MetricsDataResponse'
      summary: 获取性能指标
      tags:
      - Monitoring
  /monitoring/metrics/reset:
    post:
      description: 重置所有性能监控指标
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/AnyDataResponse'
      summary: 重置指标
      tags:
      - Monitoring
  /tenants:
    get:
      consumes:
      - application/json
      description: |-
        获取租户列表，支持分页和过滤，不同角色返回不同的数据

        **权限要求**：
        - 平台管理员（system_admin）：可以查看所有租户列表
        - 租户管理员（tenant_admin）：只能查看自己所属的租户信息

        **返回数据差异**：
        - 平台管理员：返回所有租户的分页列表，可能包含多条记录
        - 租户管理员：只返回当前用户所属租户的信息（单条记录），忽略分页和过滤参数

        **参数说明**：
        - pageNo: 页码（从1开始，默认1）
        - pageSize: 每页大小（1-100，默认20）
        - name: 租户名称模糊搜索（可选）
        - status: 租户状态过滤（可选，true=启用，false=禁用）

        **注意事项**：
        - 租户管理员调用此接口时，所有过滤参数会被忽略
        - 租户管理员始终只能看到自己的租户信息
      parameters:
      - default: 1
        description: 页码
        in: query
        minimum: 1
        name: pageNo
        type: integer
      - default: 20
        description: 每页大小
        in: query
        maximum: 100
        minimum: 1
        name: pageSize
        type: integer
      - description: 租户名称模糊搜索
        in: query
        name: name
        type: string
      - description: 租户状态过滤
        in: query
        name: status
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/TenantListResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/ErrorResponse'
        "422":
          description: 参数验证失败
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取租户列表
      tags:
      - Tenant Management
    post:
      consumes:
      - application/json
      description: |-
        创建新的租户并自动生成租户管理员账户

        **权限要求**：
        - 仅平台管理员（system_admin）可以调用此接口
        - 租户管理员和普通用户将收到 403 权限不足错误

        **功能说明**：
        - 创建租户时会自动生成一个租户管理员账户
        - 管理员邮箱默认为 admin@{tenantDomain}，也可以通过 adminEmail 参数自定义
        - 系统会生成16位随机强密码，并在响应中返回（仅此一次）
        - 建议管理员首次登录后立即修改密码

        **参数说明**：
        - name: 租户名称（必填，1-255字符）
        - domain: 租户域名（可选，最多255字符）
        - metadata: 租户元数据（可选，JSON对象）
        - adminEmail: 管理员邮箱（可选，默认为 admin@{domain}）
        - adminDisplayName: 管理员显示名称（可选）
      parameters:
      - description: 创建租户请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/CreateTenantRequestSwagger'
      produces:
      - application/json
      responses:
        "201":
          description: 创建成功，返回租户信息和管理员初始密码
          schema:
            $ref: '#/definitions/TenantDataResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: 权限不足：需要平台管理员权限
          schema:
            $ref: '#/definitions/ErrorResponse'
        "422":
          description: 参数验证失败
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: 创建租户（仅平台管理员）
      tags:
      - Tenant Management
  /tenants/{id}:
    delete:
      consumes:
      - application/json
      description: |-
        软删除指定的租户

        **权限要求**：
        - 仅平台管理员（system_admin）可以调用此接口
        - 租户管理员和普通用户将收到 403 权限不足错误

        **功能说明**：
        - 执行软删除操作（设置 is_deleted=true）
        - 不允许删除平台租户（type="system"）
        - 删除后的租户数据仍保留在数据库中，但不再可见

        **参数说明**：
        - id: 租户ID（UUID格式）
      parameters:
      - description: 租户ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 删除成功
          schema:
            $ref: '#/definitions/AnyDataResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: 权限不足：需要平台管理员权限
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: 租户不存在
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: 删除租户（仅平台管理员）
      tags:
      - Tenant Management
    get:
      consumes:
      - application/json
      description: |-
        根据租户ID获取租户详细信息

        **权限要求**：
        - 平台管理员（system_admin）：可以查看任意租户的详细信息
        - 租户管理员（tenant_admin）：只能查看自己所属租户的信息

        **访问控制**：
        - 租户管理员尝试访问其他租户时，将收到 403 权限不足错误
        - 系统会自动验证目标租户ID是否与当前用户的租户ID匹配

        **参数说明**：
        - id: 租户ID（UUID格式）
      parameters:
      - description: 租户ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/TenantDataResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: 权限不足：无法访问其他租户的数据
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: 租户不存在
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取租户详情
      tags:
      - Tenant Management
    put:
      consumes:
      - application/json
      description: |-
        更新租户信息，支持字段级权限控制

        **权限要求**：
        - 平台管理员（system_admin）：可以修改任意租户的所有字段
        - 租户管理员（tenant_admin）：只能修改自己租户的 name 字段

        **字段级权限控制**：
        - 租户管理员可修改字段：name（租户名称）
        - 租户管理员不可修改字段：domain（域名）、metadata（元数据）、status（状态）
        - 租户管理员尝试修改受限字段时，将收到 403 权限不足错误
        - 平台管理员可以修改所有字段

        **访问控制**：
        - 租户管理员只能更新自己所属的租户
        - 租户管理员尝试更新其他租户时，将收到 403 权限不足错误

        **参数说明**：
        - id: 租户ID（UUID格式）
        - name: 租户名称（可选，1-255字符）
        - domain: 租户域名（可选，最多255字符，仅平台管理员可修改）
        - metadata: 租户元数据（可选，JSON对象，仅平台管理员可修改）
        - status: 租户状态（可选，布尔值，仅平台管理员可修改）
      parameters:
      - description: 租户ID
        in: path
        name: id
        required: true
        type: string
      - description: 更新租户请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/UpdateTenantRequestSwagger'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            $ref: '#/definitions/TenantDataResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: 权限不足：租户管理员只能修改租户名称，或无法访问其他租户
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: 租户不存在
          schema:
            $ref: '#/definitions/ErrorResponse'
        "422":
          description: 参数验证失败
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新租户
      tags:
      - Tenant Management
  /tenants/{id}/status:
    patch:
      consumes:
      - application/json
      description: |-
        启用或禁用租户

        **权限要求**：
        - 仅平台管理员（system_admin）可以调用此接口
        - 租户管理员和普通用户将收到 403 权限不足错误

        **功能说明**：
        - 启用租户（status=true）：租户下的所有用户可以正常访问系统
        - 禁用租户（status=false）：租户下的所有用户将无法访问系统
        - 不允许禁用平台租户（type="system"）

        **参数说明**：
        - id: 租户ID（UUID格式）
        - status: 租户状态（true=启用，false=禁用）
      parameters:
      - description: 租户ID
        in: path
        name: id
        required: true
        type: string
      - description: 更新租户状态请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/UpdateTenantStatusRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            $ref: '#/definitions/TenantDataResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: 权限不足：需要平台管理员权限
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: 租户不存在
          schema:
            $ref: '#/definitions/ErrorResponse'
        "422":
          description: 参数验证失败
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新租户状态（仅平台管理员）
      tags:
      - Tenant Management
  /users:
    get:
      consumes:
      - application/json
      description: |-
        获取用户列表，支持分页、租户过滤、搜索和状态过滤

        **权限要求**：
        - 平台管理员（system_admin）：可以查看所有租户的用户或指定租户的用户
        - 租户管理员（tenant_admin）：只能查看自己租户下的用户

        **tenantId 查询参数使用规则**：
        - 租户管理员：
        - tenantId 参数会被忽略
        - 始终只返回当前用户所属租户下的用户列表
        - 平台管理员：
        - 如果提供 tenantId，返回指定租户下的用户列表
        - 如果不提供 tenantId，返回所有租户下的用户列表

        **search 查询参数说明**：
        - 支持对 displayName、phone、email 字段进行模糊搜索
        - 搜索不区分大小写
        - 多个字段使用 OR 逻辑连接

        **isActive 查询参数说明**：
        - 用于过滤用户的启用/禁用状态
        - true: 只返回启用的用户
        - false: 只返回禁用的用户
        - 不提供: 返回所有状态的用户

        **参数说明**：
        - pageNo: 页码（从1开始，默认1）
        - pageSize: 每页大小（1-100，默认20）
        - tenantId: 租户ID（可选，UUID格式，仅平台管理员可用）
        - search: 搜索关键词（可选，支持模糊匹配 displayName、phone、email）
        - isActive: 用户状态（可选，true=启用，false=禁用）

        **注意事项**：
        - 租户管理员调用此接口时，tenantId 参数会被忽略
        - 租户管理员始终只能看到自己租户下的用户
      parameters:
      - default: 1
        description: 页码
        in: query
        minimum: 1
        name: pageNo
        type: integer
      - default: 20
        description: 每页大小
        in: query
        maximum: 100
        minimum: 1
        name: pageSize
        type: integer
      - description: 租户ID（仅平台管理员可用）
        in: query
        name: tenantId
        type: string
      - description: 搜索关键词（支持模糊匹配 displayName、phone、email）
        in: query
        name: search
        type: string
      - description: 用户状态（true=启用，false=禁用）
        in: query
        name: isActive
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/UserListResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/ErrorResponse'
        "422":
          description: 参数验证失败
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取用户列表
      tags:
      - User Management
    post:
      consumes:
      - application/json
      description: |-
        创建新用户，支持可选的租户ID参数

        **权限要求**：
        - 平台管理员（system_admin）：可以在任意租户下创建用户
        - 租户管理员（tenant_admin）：只能在自己的租户下创建用户

        **tenantId 参数使用规则**：
        - 租户管理员：
        - 如果不���供 tenantId，系统自动使用当前用户的租户ID
        - 如果提供 tenantId，必须与当前用户的租户ID匹配，否则返回 403 错误
        - 平台管理员：
        - 必须提供 tenantId 参数
        - 可以指定任意有效的租户ID

        **参数说明**：
        - tenantId: 租户ID（可选，UUID格式）
        - email: 用户邮箱（必填，需符合邮箱格式）
        - password: 用户密码（必填，最少8个字符）
        - displayName: 显示名称（可选）
        - phone: 手机号码（可选）
        - isAdmin: 是否为管理员（可选，默认false）
        - roles: 用户角色列表（可选）
        - meta: 用户元数据（可选，JSON对象）
      parameters:
      - description: 创建用户请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/CreateUserRequest'
      produces:
      - application/json
      responses:
        "201":
          description: 创建成功
          schema:
            $ref: '#/definitions/UserDataResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: 权限不足：租户管理员只能在当前租户下创建用户
          schema:
            $ref: '#/definitions/ErrorResponse'
        "422":
          description: 参数验证失败
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: 创建用户
      tags:
      - User Management
  /users/{id}:
    delete:
      consumes:
      - application/json
      description: |-
        软删除指定的用户

        **权限要求**：
        - 平台管理员（system_admin）：可以删除任意租户下的用户
        - 租户管理员（tenant_admin）：只能删除自己租户下的用户

        **访问权限验证**：
        - 系统会自动查询目标用户所属的租户
        - 租户管理员尝试删除其他租户的用户时，将收到 403 权限不足错误
        - 平台管理员可以删除任意租户的用户，无需额外验证

        **功能说明**：
        - 执行软删除操作（设置 is_deleted=true）
        - 删除后的用户数据仍保留在数据库中，但不再可见

        **参数说明**：
        - id: 用户ID（UUID格式）
      parameters:
      - description: 用户ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 删除成功
          schema:
            $ref: '#/definitions/AnyDataResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: 权限不足：无法删除其他租户的用户
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: 用户不存在
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: 删除用户
      tags:
      - User Management
    get:
      consumes:
      - application/json
      description: |-
        根据用户ID获取用户详细信息

        **权限要求**：
        - 平台管理员（system_admin）：可以查看任意租户下的用户
        - 租户管理员（tenant_admin）：只能查看自己租户下的用户

        **访问权限验证**：
        - 系统会自动查询目标用户所属的租户
        - 租户管理员尝试查看其他租户的用户时，将收到 403 权限不足错误
        - 平台管理员可以查看任意租户的用户，无需额外验证

        **参数说明**：
        - id: 用户ID（UUID格式）
      parameters:
      - description: 用户ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/UserDataResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: 权限不足：无法访问其他租户的用户
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: 用户不存在
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取用户详情
      tags:
      - User Management
    put:
      consumes:
      - application/json
      description: |-
        更新用户信息

        **权限要求**：
        - 平台管理员（system_admin）：可以更新任意租户下的用户
        - 租户管理员（tenant_admin）：只能更新自己租户下的用户

        **访问权限验证**：
        - 系统会自动查询目标用户所属的租户
        - 租户管理员尝试更新其他租户的用户时，将收到 403 权限不足错误
        - 平台管理员可以更新任意租户的用户，无需额外验证

        **参数说明**：
        - id: 用户ID（UUID格式）
        - email: 用户邮箱（可选，需符合邮箱格式）
        - displayName: 显示名称（可选）
        - phone: 手机号码（可选）
        - isActive: 是否启用（可选）
        - isAdmin: 是否为管理员（可选）
        - roles: 用户角色列表（可选）
        - meta: 用户元数据（可选，JSON对象）
      parameters:
      - description: 用户ID
        in: path
        name: id
        required: true
        type: string
      - description: 更新用户请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/UpdateUserRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            $ref: '#/definitions/UserDataResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: 权限不足：无法更新其他租户的用户
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: 用户不存在
          schema:
            $ref: '#/definitions/ErrorResponse'
        "422":
          description: 参数验证失败
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新用户
      tags:
      - User Management
  /users/{id}/status:
    patch:
      consumes:
      - application/json
      description: |-
        启用或禁用用户

        **权限要求**：
        - 平台管理员（system_admin）：可以更新任意租户下的用户状态
        - 租户管理员（tenant_admin）：只能更新自己租户下的用户状态

        **访问权限验证**：
        - 系统会自动查询目标用户所属的租户
        - 租户管理员尝试更新其他租户的用户状态时，将收到 403 权限不足错误
        - 平台管理员可以更新任意租户的用户状态，无需额外验证

        **功能说明**：
        - 启用用户（isActive=true）：用户可以正常登录和访问系统
        - 禁用用户（isActive=false）：用户将无法登录系统

        **参数说明**：
        - id: 用户ID（UUID格式）
        - isActive: 用户状态（true=启用，false=禁用）
      parameters:
      - description: 用户ID
        in: path
        name: id
        required: true
        type: string
      - description: 更新用户状态请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/UpdateUserStatusRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            $ref: '#/definitions/UserDataResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: 权限不足：无法更新其他租户的用户状态
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: 用户不存在
          schema:
            $ref: '#/definitions/ErrorResponse'
        "422":
          description: 参数验证失败
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新用户状态
      tags:
      - User Management
schemes:
- http
- https
securityDefinitions:
  BearerAuth:
    description: 输入 "Bearer {token}" 格式的 JWT 令牌进行身份认证
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
tags:
- description: 用户认证相关接口（注册、登录、Token 刷新、注销等）
  name: Authentication
- description: 租户管理接口（需要管理员权限）
  name: Tenant Management
- description: 用户管理接口（需要租户管理员权限）
  name: User Management
- description: 审计日志接口
  name: Audit
- description: 监控接口
  name: Monitoring
- description: 模型提供商管理接口
  name: providers
- description: AI 对话接口
  name: chat
- description: 会话管理接口
  name: sessions
- description: 消息管理接口
  name: messages
- description: 健康检查接口
  name: health
