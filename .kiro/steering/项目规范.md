# 项目开发规范

## 项目概述

这是一个基于 Vite + React + TypeScript 的现代化前端项目，采用 CRA 风格的开发体验。

## 技术栈

- **构建工具**: Vite 7.0
- **框架**: React 18.3 + TypeScript 5.8
- **状态管理**: Zustand + React Query (TanStack Query)
- **UI 框架**: Ant Design 5.25
- **样式方案**: TailwindCSS 4.1
- **路由**: React Router 7.6
- **测试**: Vitest + React Testing Library + Playwright
- **代码规范**: ESLint + Prettier
- **包管理器**: 支持 yarn/pnpm

## 代码规范

### TypeScript 配置

- 严格模式已启用 (`strict: true`)
- 使用 ESNext 作为编译目标
- 路径别名: `@/*` 映射到 `./src/*`
- 必须通过类型检查才能提交代码

### 导入规范

- 使用路径别名 `@/` 引用 src 目录下的模块
- 使用 `@ianvs/prettier-plugin-sort-imports` 自动排序导入语句
- 优先使用命名导入而非默认导入

### 组件开发

- 使用函数式组件和 React Hooks
- 组件文件使用 PascalCase 命名
- 优先使用 TypeScript 类型而非 PropTypes
- 使用 `react-jsx` 转换，无需手动导入 React

### 样式规范

- 优先使用 TailwindCSS 工具类
- 使用 Ant Design 组件时遵循其设计规范
- 使用 `clsx` 处理条件类名

## 开发流程

### 启动开发服务器

```bash
yarn dev
# 或
yarn start
```

开发服务器运行在 <http://localhost:3000>

### 代码检查

```bash
yarn lint          # 运行 ESLint 检查
yarn lint:fix      # 自动修复 ESLint 问题
yarn typecheck     # TypeScript 类型检查
yarn prettier      # 格式化代码
```

### 测试

```bash
yarn test          # 运行单元测试
yarn test:watch    # 监听模式运行测试
yarn test:ui       # 使用 UI 界面运行测试
yarn test:e2e      # 运行 E2E 测试
```

### 构建

```bash
yarn build         # 构建生产版本
yarn preview       # 预览生产构建
```

### 提交前验证

```bash
yarn validate      # 运行所有检查（lint + test + build + typecheck）
```

## Git 工作流

- 使用 Husky 进行 Git Hooks 管理
- 使用 lint-staged 在提交前自动格式化代码
- 提交前会自动运行 Prettier 和 ESLint

## API 代理配置

开发环境下，`/api/` 路径会被代理到 `http://localhost:8080`。
如需修改代理配置，请编辑 `vite.config.ts` 中的 `server.proxy` 配置。

## 环境变量

- 支持 CRA 风格的环境变量（`REACT_APP_` 前缀）
- 环境变量文件: `.env`, `.env.local`, `.env.development`, `.env.production`
- 示例配置见 `.env.sample`

## 性能优化建议

- 使用 React.lazy() 和 Suspense 进行代码分割
- 使用 React Query 进行数据缓存和状态管理
- 使用 Zustand 管理全局状态时保持状态最小化
- 使用 useMemo 和 useCallback 优化重渲染

## 注意事项

- 本项目使用 SWC 作为 React 插件以提升构建速度
- 构建时会生成 sourcemap 便于调试
- 开发服务器启用了 CORS 支持
- Node.js 版本要求: 22.17.0 (通过 Volta 管理)
